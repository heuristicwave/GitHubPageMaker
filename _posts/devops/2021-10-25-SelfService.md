---
layout: post
current: post
cover:  assets/built/images/background/self.png
navigation: True
title: Self-service Infrastructure
date: 2021-10-25 00:00:00
tags: [devops]
class: post-template
subclass: 'post tag-devops'
author: HeuristicWave
---

λ³Έ κΈ€μ€ [Kief Morrisμ Infrastructure as Code](https://www.oreilly.com/library/view/infrastructure-as-code/9781491924334/ )μ™€ [HashiCorp λ°±μ„](https://www.hashicorp.com/resources/unlocking-the-cloud-operating-model-provisioning )λ¥Ό μ½κ³  ν•™μµν• λ‚΄μ©μ„ κΈ°λ°μΌλ΅ μ‘μ„±ν• κΈ€ μ…λ‹λ‹¤.

<br>

## μ„λ¬Έ

IaC(Infrastructure as Code)μ— κ΄€μ‹¬μ„ κ°–κ³  κ³µλ¶€λ¥Ό ν•λ‹¤λ³΄λ©΄ **Self-service Infra**λΌλ” λ§μ„ μμ£Ό λ§λ‚κ² λ©λ‹λ‹¤.
λ‡ κ°μ›”μ§Έ μ™€λ‹Ώμ§€ μ•λ” κ°λ…μ΄μ€μ§€λ§, μµκ·Ό **ν‚¤ν”„ λ¨λ¦¬μ¤**μ μ±…μ„ λ‹¤μ‹ μ½κ³  μ΅°κΈμ€ μ•κ² λ κ±° κ°™μ•„ κ·Έλ™μ• κ³µλ¶€ν• Self-service Infraμ— λ€ν• μλ£λ“¤μ„ λ°”νƒ•μΌλ΅ μ‘μ„±ν•΄ λ³΄μ•μµλ‹λ‹¤.

**Self-service Infra**μ— κ΄€ν• λ°°κ²½μ§€μ‹μ„ λ„“νλ” λ° λ„μ›€μ΄ λμ—μΌλ©΄ μΆ‹κ² μµλ‹λ‹¤.

<br>

## Dynamic Infrastructure

**λ™μ  μΈν”„λΌ**λ” μ„λ²„, μ¤ν† λ¦¬μ§€, λ„¤νΈμ›ν¬μ™€ κ°™μ€ μΈν”„λΌ μμ›μ„ κ΄€λ¦¬ν•  μ μλ” μ‹μ¤ν…μ„ λ§ν•©λ‹λ‹¤.
λ™μ  μΈν”„λΌμ μΆ…λ¥λ΅λ” Public/Private ν΄λΌμ°λ“, μ¤ν”μ¤νƒμ„ ν™μ©ν•λ” μ‚¬μ„¤ ν΄λΌμ°λ“, λ² μ–΄λ©”νƒ λ“±μ΄ μμµλ‹λ‹¤.

μ•μ„  μ •μλ§ λ³΄λ©΄ λ™μ  μΈν”„λΌλ” ν΄λΌμ°λ“μ™€ κµ‰μ¥ν μ μ‚¬ν•μ§€λ§, **ν‚¤ν”„ λ¨λ¦¬μ¤**λ” λ™μ  μΈν”„λΌκ°€ ν΄λΌμ°λ“λ³΄λ‹¤ λ²”μ„κ°€ λ” λ„“λ‹¤κ³  ν•©λ‹λ‹¤.

π“£ *λ™μ  μΈν”„λΌλ¥Ό μ†κ°ν•λ©° μ•λ ¤λ“λ¦¬κ³  μ‹¶μ€ λ¬Έμ¥μ΄ μμµλ‹λ‹¤.* 

**ν΄λΌμ°λ“λ΅μ μ „ν™**μ΄λΌλ” μλ―Έμ— λ€ν•΄ λ§μ€ μ‚¬λλ“¤μ΄ μ—¬λ¬ μΈ΅λ©΄μ—μ„ μ„¤λ…μ„ ν•μ§€λ§,
μ €λ” HashiCorpμ [Unlocking the Cloud Operating Model: Provisioning](https://www.hashicorp.com/resources/unlocking-the-cloud-operating-model-provisioning)
λ°±μ„μ— μ†κ°λ λ‹¤μ ν‘ν„μ— μ°Έ κ³µκ°μ΄ κ°‘λ‹λ‹¤.

> ν΄λΌμ°λ“λ΅μ μ „ν™μ λ³Έμ§μ μΈ μλ―Έλ” "μ •μ " μΈν”„λΌμ—μ„ "λ™μ " μΈν”„λΌλ΅μ μ „ν™μ…λ‹λ‹¤.
> 
> The essential implications of the transition to the cloud is the shift from β€staticβ€ infrastructure to β€dynamicβ€ infrastructure

<br>

## λ™μ  μΈν”„λΌ ν”λ«νΌ μ”κµ¬ μ‚¬ν•­

λ™μ  μΈν”„λΌ ν”λ«νΌμ€ λ‹¤μκ³Ό κ°™μ€ νΉμ„±μ΄ μμµλ‹λ‹¤.

- Programmable
- On-Demand
- Self-Service

### π’» Programmable

λ™μ  μΈν”„λΌ ν”λ«νΌμ€ ν”„λ΅κ·Έλλ°μ„ μ‰½κ² ν•  μ μμ–΄μ•Ό ν•©λ‹λ‹¤. μ μ € μΈν„°νμ΄μ¤ μ™Έμ—λ„ μ¤ν¬λ¦½νΈ, CLIμ™€ κ°™μ€ λ„κµ¬λ“¤κ³Όλ„ μƒνΈ μ‘μ© ν•  μ μλ„λ΅ ν”„λ΅κ·Έλλ° APIκ°€ ν•„μ”ν•©λ‹λ‹¤.
μ•„λ κ° ν”λ«νΌ λ³„ SDKλ¥Ό μ‚¬μ©ν•λ©΄ ν΄λΌμ°λ“ λ‚΄ μμ›μ„ μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ” μ½”λ“λ¥Ό μ‘μ„±ν•  μ μμµλ‹λ‹¤.

- [AWS SDK](https://aws.amazon.com/tools/)
- [Azure SDK](https://azure.microsoft.com/en-us/downloads/)  
- [GCP SDK](https://cloud.google.com/sdk/)
- [Openstack SDK](https://docs.openstack.org/openstacksdk/latest/)


### β° On-Demand

λ™μ  μΈν”„λΌ ν”λ«νΌμ—μ„ μμ›μ„ μ¦‰μ‹ μƒμ„±ν•κ³  μ‚­μ ν•λ” κΈ°λ¥μ€ ν•„μμ…λ‹λ‹¤.
λν• μ „ν†µμ μΈ μΈν”„λΌμ κ³ΌκΈ μ •μ±…μ΄ μΌμ • κΈ°κ°„ λ™μ•μ κ³„μ•½μ„ κΈ°λ°μΌλ΅ ν•λ‹¤λ©΄, λ™μ  μΈν”„λΌμ—μ„λ” μ‹κ°„λ‹Ή κ³ΌκΈ μ²΄κ³„λ¥Ό μ§€μ›ν•©λ‹λ‹¤. 


π *λ“λ””μ–΄ λ€λ§μ μ…€ν”„ μ„λΉ„μ¤κ°€ μ²μ μ†κ° λ©λ‹λ‹¤!*


### πƒπ» Self-Service

μ…€ν”„μ„λΉ„μ¤λ” μ¨λ””λ§¨λ“ μ”κµ¬ μ‚¬ν•­μ„ μΆ€ λ” λ°μ „μ‹ν‚¨ κ°λ…μ…λ‹λ‹¤. μ „ν†µμ μΈ λ°©λ²•μ—μ„ μΈν”„λΌλ¥Ό μ”κµ¬ν•κΈ° μ„ν•΄μ„λ” μ„Έλ¶€ μ”μ²­ μ–‘μ‹, μ„¤κ³„ λ° λ…μ„Έ λ¬Έμ„, κµ¬ν„ κ³„ν μλ¦½ λ“±μ„ ν•„μ”λ΅ ν–μµλ‹λ‹¤.
μ…€ν”„μ„λΉ„μ¤λ” μ „ν†µμ μΈ λ°©λ²•μ—μ„ λ” μ§„ν™”ν•μ—¬ **ν•„μ”ν• μΈν”„λΌλ¥Ό μ¦‰μ‹ ν”„λ΅λΉ„μ €λ‹ν•κ³  μ‰½κ² μμ •ν•  μ μλ” μλ™ν™”λ μ μ°¨**λ¥Ό μλ―Έν•©λ‹λ‹¤.

π›  *μ…€ν”„ μ„λΉ„μ¤λ” μΈν”„λΌ ν…ν”λ¦Ώμ„ μ΄μ©ν•  μ μλ” IaC λ„κµ¬λ¥Ό κΈ°λ°μΌλ΅ κµ¬ν„ν•©λ‹λ‹¤.* 

μλ¥Ό λ“¤μ–΄ κ°λ°μκ°€ λ΅λ“λ°Έλ°μ„λ΅ ALBλ¥Ό μ‚¬μ©ν•κ³  μλ‹¤κ°€ NLBλ΅ λ°”κΎΈκ³  μ‹¶μ€ κ²½μ°, λ‹¤μκ³Ό κ°™μ΄ μ •μλ μΈν”„λΌ μ½”λ“λ¥Ό μ¬λ°°ν¬ ν•λ©΄ λ©λ‹λ‹¤.

```terraform
resource "aws_lb" "test" {
  name               = "test-lb-tf"
  internal           = false
  
  # load_balancer_type = "application"
  load_balancer_type = "network"
  
  # Leave out other config ...
}
```

<br>

**HashiCorp**κ°€ μ •μν• [Self-Service Infrastructure](https://www.hashicorp.com/products/terraform/self-service-infrastructure) κ²μ‹λ¬Όμ„ λ³΄λ©΄,
Self-Service Infraκ°€ μ–΄λ–¤ μλ―ΈμΈμ§€ λ” μ‰½κ² λ‹¤κ°€μµλ‹λ‹¤. *(μ²¨λ¶€λ λ§ν¬λ¥Ό ν†µν•΄ μ…€ν”„μ„λΉ„μ¤μ μ¥μ μ„ κΌ­ ν•λ² μ½μ–΄λ³΄μ„Έμ”!)*

#### κΈ°μ΅΄ λ°©λ²•

κ°λ°μλ” μΈν”„λΌ λ‹΄λ‹Ήμκ°€ μΈν”„λΌλ¥Ό ν• λ‹Ήν•  λ•κΉμ§€ κΈ°λ‹¤λ ¤μ•Ό ν•©λ‹λ‹¤.

<img src="https://www.hashicorp.com/img/products/terraform/use-cases/self-service-infrastructure/self-service-challenge.png" width="600" height="300">

#### μ…€ν”„ μ„λΉ„μ¤ μ μ©

μ‘μ„±λ μΈν”„λΌ ν…ν”λ¦Ώμ„ ν™μ©ν•΄ μ¨λ””λ§¨λ“λ΅ ν”„λ΅λΉ„μ €λ‹ ν•  μ μμµλ‹λ‹¤.

<img src="https://www.hashicorp.com/img/products/terraform/use-cases/self-service-infrastructure/self-service-solution.png" width="600" height="300">

<br>

## κΈ€μ„ λ§μΉλ©°
μ €λ” ν…λΌνΌμ„ κ³µλ¶€ν• μ΄ν›„, κ°„λ‹¨ν• μ›Ήμ„λΉ„μ¤λ¥Ό μ΄μν•λ” ν† μ΄ν”„λ΅μ νΈλ¥Ό μ§„ν–‰ν•  λ• λ‹¤μκ³Ό κ°™μ€ μΈν”„λΌ ν™κ²½μ„ μμ£Ό μ‚¬μ©ν•©λ‹λ‹¤.

<img src="https://github.com/GSNextLevel/neoTerraform/blob/main/image/webserver_cluster.png?raw=true" width="500" height="550">

λ―Έλ¦¬ μ½”λ“λ΅ μ •μν• μΈν”„λΌ λ•λ¶„μ— κ°λ°μ—λ§ μ§‘μ¤‘ν•  μ μλ” ν™κ²½κ³Ό μƒμ‚°μ„± ν–¥μƒμ„ κ²½ν—ν–μµλ‹λ‹¤.
λν• ν…λΌνΌ λ¨λ“ λ•λ¶„μ— μ κ°€ μ›ν•λ” λ€λ΅ μΈν”„λΌ μ¤ν™μ„ λ³€κ²½ν•κ³  κ°μΆ… ν΄λΌμ°λ“ μ„λΉ„μ¤ μ¶”κ°€ νΉμ€ μ κ±°κ°€ κ°€λ¥ν–μµλ‹λ‹¤.

μ…€ν”„μ„λΉ„μ¤ μΈν”„λΌκ°€ κΈ°μ΅΄ μΉμΈ μ²΄κ³„(*λ¦¬μ†μ¤ μ”μ²­ β΅οΈ λ‹΄λ‹Ήμ μΉμΈ*)λ¥Ό λ¶€μ •ν•λ” κ²ƒμ€ μ•„λ‹λΌκ³  μƒκ°ν•©λ‹λ‹¤.
κΈ°μ΅΄ μ²΄κ³„κ°€ κ°–κ³  μλ” λ³΄μ•μ  μ΄μ μ„ ν¬ν•¨ν• μ¥μ λ“¤μ„ μ μ§€ν•λ©°, μ μ—°ν•κ³  μ‹ μ†ν•κ² μΈν”„λΌλ¥Ό μ΄μ©ν•λ” Self-service ν™κ²½μ΄ λ¶λ¬μ¬ μ¥μ μ„ κ³ λ―Όν•΄ λ΄μ•Όκ² μµλ‹λ‹¤.

λ§μ§€λ§‰μΌλ΅, DevOps λ¬Έν™”κ°€ μ •μ°©ν•΄κ°€λ©° **CI/CD** λ¥Ό ν†µν•΄ μ§€μ†μ  λ°°ν¬κ°€ κ°€λ¥ν•΄μ§€λ©° λ” μ¦μ€ μ„λΉ„μ¤ μ¶μ‹κ°€ κ°€λ¥ν•΄μ΅μµλ‹λ‹¤.
λν•, **IaC**λ¥Ό ν†µν•΄ Immutable Infraλ¥Ό μ¶”κµ¬ν•λ©° μΈν”„λΌμ μΌκ΄€μ„±κ³Ό μ•μ •μ„±μ„ λ³΄μ¥ν•κ² λμ—μµλ‹λ‹¤.
μ•μ„  λ‘ κ°μ κ°λ…μ— λ”ν•΄ **Self-service**λ¥Ό μ¶”κµ¬ν•λ‹¤λ©΄ μ΅°μ§μ λ―Όμ²©μ„±κ³Ό μƒμ‚°μ„± ν–¥μƒμ— λ„μ›€μ΄ λ  κ²ƒμ΄λΌκ³  μƒκ°ν•©λ‹λ‹¤.

μ†μ¤‘ν• μ‹κ°„μ„ λ‚΄μ–΄ μ½μ–΄μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤! μλ»λ λ‚΄μ©μ€ μ§€μ ν•΄μ£Όμ„Έμ”! πƒ

---
